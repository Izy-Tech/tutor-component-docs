<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <title>&lt;my-element> Demo</title>
  <script src="node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>
  <script src="node_modules/lit/polyfill-support.js"></script>
  <script type="module" src="dist/tutor-chat.js"></script>
  <link href="https://fonts.cdnfonts.com/css/stencil-paper" rel="stylesheet">

  <style>
    .chat {
      position: fixed;
      z-index: 9999;
    }
  </style>
</head>

<body>
  <tutor-chat class="chat" id="tutor-chat"></tutor-chat>
  <button id="default-theme-button">Tema Padrão</button>
  <button id="dark-theme-button">Tema Escuro</button>
  <button id="new-theme-button">Tema Novo</button>
</body>

<script type="module">
  import { ThemeManager } from './dist/theme-manager.js';

  ThemeManager.setDefaultTheme({
    messageSuggestions: {
      default: {
        color: 'darkblue'
      },
      hover: {
        backgroundColor: '#0078d4'
      }
    }
  });

  ThemeManager.setLightTheme({
    chat: {
      backgroundColor: 'blue'
    }
  });

  ThemeManager.setDarkTheme({
    chat: {
      backgroundColor: '#292929'
    },
    textInput: {
      styles: {
        container: {
          backgroundColor: '#1e1e1e',
          color: '#ffffff'
        }
      }
    },
    header: {
      styles: {
        backgroundColor: '#1e1e1e',
        color: '#ffffff'
      }
    }
  });

  export function enableDefaultTheme() {
    ThemeManager.setCurrentTheme('default');
  }

  export function enableDarkTheme() {
    ThemeManager.setCurrentTheme('dark');
  }

  export function enablenewTheme() {
    ThemeManager.setCurrentTheme('light');
  }

  document.addEventListener("DOMContentLoaded", function (event) {
    document.getElementById('default-theme-button').addEventListener('click', enableDefaultTheme);
    document.getElementById('dark-theme-button').addEventListener('click', enableDarkTheme);
    document.getElementById('new-theme-button').addEventListener('click', enablenewTheme);

    const tutorChat = document.getElementById('tutor-chat');

    tutorChat.options = {
      organizationId: "organizationId",
      productId: "productId",
      isExternalProductId: true,
      getToken: getConsumerToken,
      getCurrentContent: getCurrentContent,
      startOpened: false,
      showSuggestions: false
    };
  });

  function navigate(currentVideo) {
    console.log(currentVideo);
  }

  function getCurrentContent() {
    return {
      externalId: 'csharp-perf-video1',
      position: 600000
    }
  }

  async function getConsumerToken() {
    var response = "Efetuar chamada do response necessária para obter o token";
    const tokenResponse = await response.json();
    return tokenResponse.access_token;
  }
</script>

</html>
